{"meta":{"title":"Carrot Blog","subtitle":"åç«¯ã€å¤§æ•°æ®ã€Javaã€Go","description":"","author":"Wandering Carrot","url":"https://carrotwang.github.io","root":"/"},"pages":[{"title":"archives","date":"2019-11-05T09:04:56.000Z","updated":"2019-11-05T09:04:56.443Z","comments":true,"path":"archives/index-1.html","permalink":"https://carrotwang.github.io/archives/index-1.html","excerpt":"","text":""},{"title":"archives","date":"2019-11-05T08:30:34.000Z","updated":"2019-11-05T09:19:04.923Z","comments":true,"path":"archives/index.html","permalink":"https://carrotwang.github.io/archives/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-11-05T08:40:36.000Z","updated":"2019-11-05T08:40:36.897Z","comments":true,"path":"categories/index-1.html","permalink":"https://carrotwang.github.io/categories/index-1.html","excerpt":"","text":""},{"title":"categories","date":"2019-11-05T08:31:45.000Z","updated":"2019-11-05T08:41:25.120Z","comments":true,"path":"categories/index.html","permalink":"https://carrotwang.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-11-05T08:30:39.000Z","updated":"2019-11-05T08:30:39.189Z","comments":true,"path":"tags/index.html","permalink":"https://carrotwang.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Spring IOCæºç åˆæ¢ï¼ˆä¸€ï¼‰","slug":"Spring-IOCæºç åˆæ¢ï¼ˆä¸€ï¼‰","date":"2019-11-06T03:36:37.000Z","updated":"2019-11-06T03:37:09.415Z","comments":true,"path":"2019/11/06/Spring-IOCæºç åˆæ¢ï¼ˆä¸€ï¼‰/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Spring-IOC%E6%BA%90%E7%A0%81%E5%88%9D%E6%8E%A2%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"Springæä¾›äº†ä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼šIOCå’ŒAOPï¼ŒåŸºäºæ­¤å½¢æˆäº†Springçš„ç”Ÿæ€ç¯å¢ƒï¼Œå…¶ä¸­IOCåˆæ˜¯æ•´ä¸ªSpringç”Ÿæ€çš„åŸºç¡€ï¼Œä¹Ÿå°±æ˜¯IOCæ˜¯Springæœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚ Spring IOCå³åå‘æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥å«ä¾èµ–æ³¨å…¥ï¼ŒæŠŠbeanï¼ˆç»„ä»¶ï¼‰çš„åˆå§‹åŒ–å·¥ä½œäº¤ç»™IOCå®¹å™¨ï¼Œè€Œä¸æ˜¯åœ¨ç¨‹åºä¸­å®Œæˆï¼Œè¿™å°±å°†ç»„ä»¶çš„åˆå§‹åŒ–å’Œç»„ä»¶çœŸæ­£çš„æ ¸å¿ƒåŠŸèƒ½ç›¸éš”ç¦»ï¼Œåšåˆ°äº†è§£è€¦ï¼›å¦å¤–ï¼ŒSpring IOCæå€¡é¢å‘æ¥å£ç¼–ç¨‹ï¼ŒåŒæ ·æ˜¯ä¸ºäº†è§£è€¦ã€‚Springå¸®åŠ©æˆ‘ä»¬ä½¿è½¯ä»¶çš„ç»“æ„ç¬¦åˆï¼Œå¼€é—­åŸåˆ™ï¼ˆå¯¹ä¿®æ”¹å°é—­ï¼Œå¯¹æ‰©å±•å¼€å‘ï¼šä¸éœ€è¦ä¿®æ”¹ä»£ç æ¥å¢åŠ æ–°çš„åŠŸèƒ½ï¼‰ï¼Œæ˜¯è§£è€¦ç»„ä»¶ä¾èµ–å…³ç³»çš„åˆ©å™¨ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡å¯¹Spring IOCæœºåˆ¶æºç çš„å­¦ä¹ ï¼Œæ›´å¥½çš„ç†è§£Springçš„IOCåŠŸèƒ½ã€‚ å°†ä»ç»„æˆå’Œè¡Œä¸ºä¸¤ä¸ªè§’åº¦æ¥ç²—ç•¥åˆ†æSpring IOCå®¹å™¨ï¼Œæœ¬æ–‡æ³¨æ„åŸºäºSpring IOCå®¹å™¨çš„ç»„æˆæ¥åˆ†æã€‚ Springå®¹å™¨ä¸»è¦æŒ‡BeanFactoryæˆ–è€…ApplicationContextï¼Œè€Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯åè€…ã€‚ ç”±æ­¤å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Springå®¹å™¨ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªç»“æ„å›¾ã€‚æ ¸å¿ƒæ¥å£å°±æ˜¯BeanFactoryï¼Œå®ƒæä¾›äº†å®¹å™¨çš„åŸºæœ¬æ–¹æ³•getBeanä»¥è·å¾—å®¹å™¨å†…çš„ç»„ä»¶ï¼ŒHierarchicalBeanFactoryï¼ŒListableBeanFactoryï¼ŒAutowireCapableBeanFactoryä¸‰ä¸ªæ¥å£åˆ†åˆ«ç»§æ‰¿è‡ªBeanFactoryï¼Œå¹¶å¯¹BeanFactoryçš„åŠŸèƒ½åšäº†æ‰©å±•ã€‚HierarchicalBeanFactoryæä¾›äº†çˆ¶å­å®¹å™¨çš„åŠŸèƒ½ï¼ŒListableBeanFactoryæä¾›äº†å®¹å™¨å†…Beançš„åˆ—è¡¨æ“ä½œåŠŸèƒ½ï¼ŒAutowireCapableBeanFactoryåˆ™æä¾›äº†Beançš„è‡ªåŠ¨è£…é…åŠŸèƒ½ï¼›ConfigurableBeanFactoryåˆ™æä¾›äº†BeanFactoryçš„ä¸€äº›é…ç½®åŠŸèƒ½ï¼›è¿™å°±æ˜¯BeanFactoryæ¥å£å±‚æ¬¡å…³ç³»å›¾ï¼ŒXmlBeanFactoryæ˜¯ä¸€ä¸ªå¸¸è§çš„BeanFactoryå®ç°å®ƒå°±å®ç°äº†ä¸Šè¿°æ¥å£ä»¥æä¾›å®Œæ•´çš„å®¹å™¨åŠŸèƒ½ï¼ŒåŒæ ·ä¾ç…§æ­¤æ¥å£å±‚æ¬¡å®ç°ä¹Ÿå¯ä»¥è¾¾åˆ°è§£è€¦ã€èŒè´£æ¸…æ™°çš„ç›®çš„ã€‚ ApplicationContextåŒæ ·æ‹¥æœ‰BeanFactoryçš„ä¸Šè¿°èƒ½åŠ›ï¼Œæ‰€ä»¥å®ƒç»§æ‰¿äº†BeanFactoryä½“ç³»çš„å¤§éƒ¨åˆ†æ¥å£ï¼Œä¸Šå›¾ä¸­æœ‰ä¸€ç‚¹æ˜¯ä¸å‡†ç¡®çš„ï¼ŒApplicationContextå¹¶æœªç»§æ‰¿AutowireCapableBeanFactoryï¼Œå®ƒçš„å®ç°ç±»æ˜¯é€šè¿‡æŒæœ‰BeanFactoryå®ä¾‹æ¥æ‹¥æœ‰è‡ªåŠ¨è£…é…çš„åŠŸèƒ½ï¼ˆå®ƒä¸å¯¹å¤–æš´éœ²è‡ªåŠ¨è£…é…åŠŸèƒ½ï¼‰ï¼Œç‰¹åˆ«åœ°ï¼ŒApplicationContextå®ç°äº†MessageSourceã€ResourceLoaderã€ApplicationEventPublisherä¸‰ä¸ªæ¥å£ï¼Œä»¥æ‹¥æœ‰å¯¹å›½é™…åŒ–ã€åŠ è½½èµ„æºã€äº‹ä»¶æœºåˆ¶çš„æ”¯æŒã€‚ å¸¸è§çš„BeanFactoryå®ç°æœ‰XmlBeanFactoryï¼ŒDefaultListableBeanFactoryï¼Œå‰è€…ç»§æ‰¿è‡ªåè€…ï¼Œè€Œåè€…ä¹Ÿæ˜¯Springä¸­BeanFactoryé»˜è®¤çš„å…¨åŠŸèƒ½å®ç°ï¼ŒApplicationContextä¹Ÿæ˜¯é€šè¿‡æŒæœ‰å®ƒè€Œå®ç°ã€‚DefaultListableBeanFactoryçš„ä½¿ç”¨éœ€è¦æˆ‘ä»¬å»åŠ è½½ç‰¹å®šçš„é…ç½®èµ„æºï¼Œå¹¶é…ç½®è§£æå™¨å»è§£æï¼ŒXmlBeanFactoryåªè¦æ±‚æˆ‘ä»¬å»åŠ è½½éœ€è¦çš„Xmlé…ç½®èµ„æºã€‚ æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ›´æ¨èä½¿ç”¨ApplicationContextï¼Œå®ƒçš„å®ç°ç±»å¸¸è§çš„æœ‰WebApplicationContextç­‰ï¼Œå®ƒé™¤äº†å¸®åŠ©æˆ‘ä»¬å®ç°äº†èµ„æºåŠ è½½åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†ä¸Šè¿°çš„é«˜çº§åŠŸèƒ½ã€‚","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Web","slug":"Web","permalink":"https://carrotwang.github.io/tags/Web/"},{"name":"Spring","slug":"Spring","permalink":"https://carrotwang.github.io/tags/Spring/"}]},{"title":"Nettyæºç é˜…è¯»ï¼ˆå…³äºChannelPipelineå’ŒChannelHandlerï¼‰","slug":"Nettyæºç é˜…è¯»ï¼ˆå…³äºChannelPipelineå’ŒChannelHandlerï¼‰","date":"2019-11-06T03:30:53.000Z","updated":"2019-11-06T03:31:32.980Z","comments":true,"path":"2019/11/06/Nettyæºç é˜…è¯»ï¼ˆå…³äºChannelPipelineå’ŒChannelHandlerï¼‰/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Netty%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E5%85%B3%E4%BA%8EChannelPipeline%E5%92%8CChannelHandler%EF%BC%89/","excerpt":"","text":"1.ChannelPipelineå…¶å®ï¼Œå…³äºChannelPipelineçš„ä¸œè¥¿ä¸»è¦å°±æ˜¯ä¸€ä¸ªè´£ä»»é“¾æ¨¡å¼ï¼Œå¦å¤–å°±æ˜¯æ˜¯Channelã€ChannelPipelineã€Handlerå’ŒChannelContextçš„å…³ç³»ï¼Œåœ¨æ•´ä½“ä»‹ç»ä¸€æ–‡ä¸­ï¼Œå·²ç»è®²çš„æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚ 2.ChannelHandler å…³äºHandlerçš„éƒ¨åˆ†åº”è¯¥æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ä¸­æ¥è§¦æœ€å¤šçš„éƒ¨åˆ†ï¼ˆè¿™ä½“ç°äº†Nettyç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç¼–ç¨‹æ¨¡å‹ï¼‰ã€‚ Nettyå†…ç½®äº†è®¸å¤šæœ‰ç”¨çš„ChannelHandlerï¼Œæ¯”å¦‚è§£å†³ç²˜åŒ…é—®é¢˜çš„Handlerï¼Œå„ç§ç¼–è§£ç Handlerï¼Œæ—¥å¿—Handlerï¼Œå¿ƒè·³Handlerç­‰ï¼Œæå¤§çš„æ–¹ä¾¿äº†æˆ‘ä»¬çš„å¼€å‘ã€‚ ï¼ˆ1ï¼‰Handlerè§£å†³ç²˜åŒ…é—®é¢˜ ï¼ˆ2ï¼‰Handlerè§£å†³å¿ƒè·³","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://carrotwang.github.io/tags/Netty/"}]},{"title":"Nettyæºç é˜…è¯»ï¼ˆå…³äºByteBufï¼‰","slug":"Nettyæºç é˜…è¯»ï¼ˆå…³äºByteBufï¼‰","date":"2019-11-06T03:27:37.000Z","updated":"2019-11-06T03:28:41.407Z","comments":true,"path":"2019/11/06/Nettyæºç é˜…è¯»ï¼ˆå…³äºByteBufï¼‰/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Netty%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E5%85%B3%E4%BA%8EByteBuf%EF%BC%89/","excerpt":"","text":"ByteBufæ¥å£æä¾›äº†ä¸€å¥—ç®€å•æ˜“ç”¨çš„APIï¼Œå¹¶å®ç°äº†å¯¹NIO ByteBufferçš„å…¼å®¹ï¼Œå…¶å®ç°æœ‰â€œéæ± åŒ–çš„å †å†…å­˜Bufferâ€ï¼Œâ€œéæ± åŒ–çš„ç›´æ¥å†…å­˜Bufferâ€ï¼Œâ€œæ± åŒ–çš„å †å†…å­˜Bufferâ€ï¼Œâ€œæ± åŒ–çš„ç›´æ¥å†…å­˜Bufferâ€ï¼Œå¦å¤–ByteBufçš„å®ç°æä¾›äº†å¯¹å†…å­˜æ³„æ¼ä¸åŒçº§åˆ«çš„ç›‘æ§ã€‚ ByteBufçš„å†…å­˜æ± å®ç°ï¼ŒByteBufå¯¹å†…å­˜æ³„æ¼çš„ç›‘æ§ï¼Œæ˜¯æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£çš„ä¸¤ä¸ªåœ°æ–¹ã€‚ 1.ByteBufçš„å†…å­˜æ± å®ç° è¿™é‡Œæ˜¯æœ€ç¹æ‚ã€æœ€éš¾çš„éƒ¨åˆ†ï¼Œè¿™é‡Œåé¢è¡¥ä¸Šã€‚2.ByteBufå¯¹å†…å­˜æ³„éœ²çš„ç›‘æ§ Nettyçš„å†…å­˜ç›‘æ§æ˜¯é’ˆå¯¹å†…å­˜æ± å’Œç›´æ¥å†…å­˜è€Œè¨€çš„ï¼Œå¯¹äºHeapByteBufè‡ªæœ‰è™šæ‹Ÿæœºå®ŒæˆGCã€‚ å¯¹äºå†…å­˜æ± è€Œè¨€ï¼Œå†…å­˜æ³„æ¼äº§ç”Ÿåœ¨Bufferå·²ç»ä½¿ç”¨å®Œï¼Œä½†æ˜¯è¿™å—å†…å­˜è¿˜æ²¡æœ‰å½’è¿˜ç»™å†…å­˜æ± ï¼Œå¯¹äºç›´æ¥å†…å­˜çš„å†…å­˜æ³„æ¼ï¼Œæ˜¯Bufferä½¿ç”¨å®Œï¼Œç›´æ¥å†…å­˜æ²¡æœ‰è¢«å›æ”¶ï¼ˆè™šæ‹Ÿæœºä¸ä¼šè‡ªåŠ¨å›æ”¶ç›´æ¥å†…å­˜ï¼‰ã€‚ ByteBufæœ‰releaseå’Œretainä¸¤ä¸ªæ¥å£ï¼Œç”±AbstractReferenceCountedByteBufå®ç°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¯¹Bufferå¼•ç”¨æ•°ç›®çš„å‡å°‘å’Œå¢åŠ ï¼Œå½“releaseåå¼•ç”¨æ•°ç›®ä¸º0æ—¶ï¼Œä¼šå¯¹Bufferè¿›è¡Œå›æ”¶ã€‚å¯¹äºå†…å­˜æ± å†…çš„Bufferä»¥åŠç›´æ¥å†…å­˜Bufferéœ€è¦æˆ‘ä»¬æ˜¾å¼è°ƒç”¨releaseè¿›è¡Œå›æ”¶ã€‚å¿˜è®°è°ƒç”¨releaseæ–¹æ³•å°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå†…å­˜æ± è€Œè¨€ï¼Œå†…å­˜æ± ä¼šä¸æ–­å˜å¤§å ç”¨å¤§é‡å†…å­˜ã€‚ å¯¹äºå†…å­˜æ³„æ¼çš„ç›‘æ§ï¼ŒNettyæœ‰å››ä¸ªçº§åˆ«ï¼šDisabledï¼ŒSimpleï¼ŒAdvancedï¼ŒParanoidï¼›åˆ†åˆ«å¯¹åº”ä¸åŒçš„ç›‘æ§é¢‘ç‡å’Œæ€§èƒ½æŸè€—ã€‚é‚£ä¹ˆNettyæ˜¯å¦‚ä½•å®ç°å†…å­˜ç›‘æ§çš„å‘¢ï¼Ÿ å¯ä»¥æŸ¥çœ‹AbstractByteBufAllocatorç±»çš„toLeakAwareBufferæ–¹æ³•ï¼Œè¿™é‡Œå®é™…ä¸Šåˆ©ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼Œä»¥SimpleLeakAwareByteBufä¸ºä¾‹ï¼Œå®ƒæŒæœ‰å®é™…èµ·ä½œç”¨çš„ByteBufå®ä¾‹ï¼Œä»¥åŠä¸€ä¸ªResourceLeakTrackerï¼ŒResourceLeakTrackerçš„å®ç°ç±»DefaultResourceLeakç»§æ‰¿äº†PhantomReferenceï¼ŒResourceLeakDetectorå°†ä¸€ä¸ªReferenceQueueä¼ å…¥ResourceLeakTrackerï¼Œè¿™æ ·åœ¨SimpleLeakAwareByteBufå¼•ç”¨è¢«å›æ”¶åï¼ŒReferenceQueueå°±è¢«æ’å…¥å¯¹åº”çš„refernceï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“æŸä¸ªByteBufä¸å†è¢«ä½¿ç”¨äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•å¾—çŸ¥è¿™ä¸ªByteBufæ˜¯å¦è¢«é‡Šæ”¾äº†å‘¢ï¼Ÿ è¿™æ˜¯ç”±ä¸€ä¸ªConcurrentHashMapæ¥å†³å®šçš„ï¼Œå®ƒå­˜å‚¨çš„keyå°±æ˜¯DefaultResourceLeakï¼ˆvalueåº”è¯¥æ˜¯å†…å­˜æ³„éœ²çš„ç›¸å…³ä¿¡æ¯ï¼‰ï¼Œå½“è°ƒç”¨releaseå¹¶ç¡®å®šå¯ä»¥å›æ”¶æ—¶ï¼Œä¼šæŠŠmapä¸­å¯¹åº”çš„keyæ¸…é™¤æ‰ï¼Œè¿™æ ·ResourceLeakDetectorä¼šå®šæœŸæ£€æŸ¥ReferenceQueueï¼Œå½“å…¶ä¸­å­˜åœ¨referenceæ—¶ï¼Œä¼šæŸ¥çœ‹mapä¸­æ˜¯å¦ä¹Ÿå­˜åœ¨ï¼Œå¦‚æœä¹Ÿå­˜åœ¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¡®è®¤å‘ç”Ÿå†…å­˜æ³„éœ²äº†ã€‚ï¼ˆReferenceQueueå’ŒConcurrentHashMapéƒ½åœ¨ResourceLeakDetectorä¸­ï¼‰ å…³äºå†…å­˜æ³„éœ²ç›‘æ§æœºåˆ¶çš„ä¸åŒçº§åˆ«ï¼Œä»¥Simpleä¸ºä¾‹ï¼Œæˆ‘ä»¬æŸ¥çœ‹AbstractByteBufAllocatorçš„toLeakAwareBufferæ–¹æ³•ï¼Œä¸€è·¯æŸ¥åˆ°ResourceLeakDetectorçš„track0æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å†…å¯ä»¥çœ‹åˆ°å®é™…ä¸Šæ˜¯ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„éšæœºæ•°å¯¹è®¾å®šçš„å‚æ•°ï¼ˆé»˜è®¤åº”è¯¥æ˜¯100ï¼‰å–ä½™ä¸º0æ—¶ï¼Œè¿”å›DefaultResourceLeakï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œå¦åˆ™è¿”å›nullï¼Œå½“çº§åˆ«ä¸ºDisableæ—¶ï¼Œç›´æ¥è¿”å›nullï¼Œå¹¶ä¸åšæ£€æŸ¥ï¼Œè¿™æ ·å°±æ²¡æœ‰æ€§èƒ½æŸè€—äº†ã€‚","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://carrotwang.github.io/tags/Netty/"}]},{"title":"Nettyæºç é˜…è¯»ï¼ˆæ•´ä½“ä»‹ç»ï¼‰","slug":"Nettyæºç é˜…è¯»ï¼ˆæ•´ä½“ä»‹ç»ï¼‰","date":"2019-11-06T03:24:59.000Z","updated":"2019-11-06T03:29:05.036Z","comments":true,"path":"2019/11/06/Nettyæºç é˜…è¯»ï¼ˆæ•´ä½“ä»‹ç»ï¼‰/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Netty%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E6%95%B4%E4%BD%93%E4%BB%8B%E7%BB%8D%EF%BC%89/","excerpt":"","text":"ä¸€. Nettyåšäº†ä»€ä¹ˆï¼Ÿ1.Nettyå®ç°äº†å¯¹Java NIOçš„å°è£…ï¼Œæä¾›äº†æ›´æ–¹ä¾¿ä½¿ç”¨çš„æ¥å£ï¼› 2.Nettyåˆ©ç”¨è´£ä»»é“¾æ¨¡å¼å®ç°äº†ChannelPipelineè¿™ä¸€æ¦‚å¿µï¼ŒåŸºäºChannelPipelineï¼Œæˆ‘ä»¬å¯ä»¥ ä¼˜é›…çš„å®ç°ç½‘ç»œæ¶ˆæ¯çš„å¤„ç†ï¼ˆå¯æ’æ‹”ï¼Œè§£è€¦ï¼‰ï¼› 3.Nettyçš„Reactorçº¿ç¨‹æ¨¡å‹ï¼Œåˆ©ç”¨æ— é”åŒ–æé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½ï¼› 4.Nettyå®ç°äº†ByteBufç”¨äºå¯¹å­—èŠ‚è¿›è¡Œç¼“å­˜å’Œæ“ä½œï¼Œç›¸æ¯”JDKçš„ByteBufferï¼Œå®ƒæ›´æ˜“ç”¨ï¼ŒåŒæ—¶è¿˜æä¾›äº†Bufferæ± çš„åŠŸèƒ½ï¼Œå¯¹äºUnpooledDirectByteBufå’ŒPooledByteBufï¼ŒNettyè¿˜å¯¹å…¶å†…å­˜ä½¿ç”¨è¿›è¡Œäº†è·Ÿè¸ªï¼Œå‘ç°å†…å­˜æ³„æ¼æ—¶ä¼šç»™å‡ºæŠ¥è­¦ï¼› äºŒ.Nettyå¯¹JDK NIOçš„å°è£…JDK NIOæœ‰ServerSocketChannelã€SocketChannelã€Selectorã€SelectionKeyå‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚ Nettyæä¾›äº†ä¸€ä¸ªChannelæ¥å£ç»Ÿä¸€äº†å¯¹ç½‘ç»œçš„IOæ“ä½œï¼Œå…¶åº•å±‚çš„IOé€šä¿¡æ˜¯äº¤ç»™Unsafeæ¥å£å®ç°ï¼Œè€ŒChannelä¸»è¦è´Ÿè´£æ›´é«˜å±‚æ¬¡çš„readã€writeã€flushã€å’ŒChannelPipelineã€Eventloopç­‰ç»„ä»¶çš„äº¤äº’ï¼Œä»¥åŠä¸€äº›çŠ¶æ€çš„å±•ç¤ºï¼›åšåˆ°äº†èŒè´£çš„æ¸…æ™°åˆ’åˆ†ï¼Œå¯¹ä½¿ç”¨è€…æ˜¯å¾ˆå‹å¥½çš„ï¼Œè§„é¿äº†JDK NIOä¸­ä¸€äº›æ¯”è¾ƒç¹çå¤æ‚çš„æ¦‚å¿µå’Œæµç¨‹ã€‚ Channelã€Unsafeç»§æ‰¿UMLå›¾ Channelå’ŒUnsafeæ˜¯åˆ†å¤šçº§åˆ«å®ç°çš„ï¼Œä¸åŒçº§åˆ«çš„Channelå’ŒUnsafeå¯¹åº”äº†ä¸åŒçº§åˆ«çš„å®ç°ï¼Œä¹Ÿæ˜¯â€œèŒè´£å•ä¸€åŸåˆ™â€çš„ä½“ç°ã€‚ ä¸‰.ChannelPipelineè´£ä»»é“¾æ¨¡å‹å€Ÿç”¨ç½‘ä¸Šçš„ä¸€å¼ å›¾è¡¨ç¤ºChannelã€ChannelPipelineã€ChannelHandlerContextå’ŒChannelHandlerä¹‹é—´çš„å…³ç³»ã€‚ æ¯ä¸ªChanneléƒ½æŒæœ‰ä¸€ä¸ªChannelPipelineï¼Œé€šè¿‡Channelçš„è¯»å†™ç­‰IOæ“ä½œå®é™…ä¸Šæ˜¯äº¤ç”±ChannelPipelineå¤„ç†çš„ï¼Œè€ŒChannelPipelineä¼šæŒæœ‰ä¸€ä¸ªChannelHandlerContexté“¾è¡¨ï¼Œæ¯ä¸ªContextå†…éƒ¨åˆåŒ…å«ä¸€ä¸ªChannelHandlerï¼Œä½¿ç”¨è€…åœ¨Pipelineä¸Šæ·»åŠ handlerè´Ÿè´£é€»è¾‘å¤„ç†ï¼ŒChannelHandlerContextè´Ÿè´£äº‹ä»¶çš„ä¼ é€’æµè½¬ã€‚æ¯ä¸ªChannelPipelineéƒ½ä¼šæŒæœ‰2ä¸ªç‰¹æ®Šçš„ChannelHandlerContextâ€”â€”headå’Œtailï¼Œä»–ä»¬åˆ†åˆ«æ˜¯Contexté“¾è¡¨çš„å¤´å’Œå°¾ã€‚ ChannelPipelineä¸Šçš„äº‹ä»¶ï¼Œåˆ†ä¸ºInboundäº‹ä»¶å’ŒOutboundäº‹ä»¶2ç§ï¼ŒInboundäº‹ä»¶ä»headContextè¯»å…¥ï¼Œåœ¨Contexté“¾ä¸Šçš„InboundHandlerä¸Šæ­£å‘ä¾æ¬¡æµåŠ¨ï¼›Outboundäº‹ä»¶ä»Channelï¼ˆå³ChannelPipelineï¼‰ä¸Šè§¦å‘ï¼Œåˆ™ä»tailContextä¸Šå‡ºå‘ï¼Œåœ¨Contexté“¾ä¸Šçš„OutboundHandlerä¸Šåå‘ä¾æ¬¡æµåŠ¨ï¼Œè‹¥ä»æŸä¸€ä¸ªContextä¸Šè§¦å‘ï¼Œåˆ™ä»è¿™ä¸ªContextä¹‹åçš„ä¸‹ä¸€ä¸ªOutboundContextå¼€å§‹æ‰§è¡Œã€‚headContextåˆ©ç”¨Unsafeå®Œæˆå®é™…çš„IOæ“ä½œã€‚ æˆ‘ä»¬åœ¨ä½¿ç”¨Nettyçš„æ—¶å€™ï¼Œä¸šåŠ¡é€»è¾‘å…¶å®åŸºæœ¬éƒ½å­˜åœ¨äºChannelHandlerï¼›Nettyä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šé€šç”¨çš„Handlerï¼Œå¦‚ä¸€äº›å¸¸ç”¨çš„ç¼–è§£ç Handlerï¼Œå¸¸è§åº”ç”¨å±‚åè®®çš„Handlerï¼Œæ•´æµã€å¿ƒè·³ã€æ—¥å¿—ç­‰å¸¸ç”¨åŠŸèƒ½çš„Handlerï¼Œåˆç†ä½¿ç”¨è¿™äº›Handlerèƒ½è¿…é€Ÿæé«˜æˆ‘ä»¬å¼€å‘çš„æ•ˆç‡ã€‚ å››.Reactorçº¿ç¨‹æ¨¡å‹Reactoræ¨¡å‹æ˜¯ä¸€ç§å¸¸è§çš„å¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œå…³äºReactæ¨¡å‹å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« Reactoræ¨¡å‹ï¼ŒReactæ¨¡å‹æ”¹å˜äº†Thread Per Connectionçš„æ¨¡å¼ï¼Œå®ƒå°†ä¸€ä¸ªç½‘ç»œIOæ“ä½œåˆ†ä¸º2éƒ¨åˆ†ï¼šè¿æ¥çš„å»ºç«‹ï¼Œç½‘ç»œé€šä¿¡åŠæ¶ˆæ¯å¤„ç†ï¼›è¿™ä¸¤éƒ¨åˆ†åˆ†åˆ«ç”¨å•ç‹¬çš„çº¿ç¨‹æ± å»å¤„ç†ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿æ¥çš„å»ºç«‹ç”¨å•ç‹¬çš„ä¸€ä¸ªçº¿ç¨‹å°±è¶³å¤Ÿäº†ï¼‰ï¼Œè¿™æ ·åšçš„å¥½å¤„å¦‚ä¸‹ï¼šåŠŸèƒ½è§£è€¦ã€åˆ©äºç»´æŠ¤ã€åˆ©äºç»„ä»¶åŒ–å¤ç”¨ã€æ–¹ä¾¿ç»†ç²’åº¦çš„å¹¶å‘æ§åˆ¶ï¼Œå¦å¤–å¯ä»¥é€šè¿‡å‡å°‘çº¿ç¨‹æ•°ï¼Œé¿å…å¤§é‡çš„çº¿ç¨‹åˆ‡æ¢ã€‚å…¶æ¨¡å‹å›¾å¦‚ä¸‹ï¼š ç®€å•çš„è¯´ï¼Œä¸€ä¸ªReactorçº¿ç¨‹ï¼ˆæ± ï¼‰è´Ÿè´£æ¥æ”¶æ‰€æœ‰çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¿æ¥äº§ç”Ÿçš„Channelèµ‹ç»™Workçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œæ¥ä¸‹æ¥çš„é€šä¿¡æ“ä½œéƒ½äº¤ç»™Workçº¿ç¨‹æ‰§è¡Œã€‚ Nettyç»“åˆNIOçš„ç‰¹ç‚¹åˆç†çš„ä½¿ç”¨äº†Reactoræ¨¡å‹ï¼Œå…·ä½“åœ°è¯´ï¼ŒNettyçš„Reactorçº¿ç¨‹æ¥æ”¶åˆ°ä¸€ä¸ªè¿æ¥è¯·æ±‚åï¼Œä¼šåˆ›å»ºä¸€ä¸ªChannelï¼Œå¹¶ä¸ºè¿™ä¸ªChannelåˆ†é…ä¸€ä¸ªEventLoopï¼Œæ¯ä¸ªEventLoopå¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼ŒChannelä¸Šçš„IOæ“ä½œå°†åœ¨EventLoopä¸Šæ‰§è¡Œï¼Œä¸€ä¸ªChannelä»…ç»‘å®šåœ¨ä¸€ä¸ªEventLoopä¸Šï¼Œä¸€ä¸ªEventLoopå¯ä»¥å¯¹åº”å¤šä¸ªChannelï¼Œè¿™æ ·å°±é¿å…äº†åŒæ­¥ï¼Œä¹Ÿæé«˜äº†çº¿ç¨‹çš„ä½¿ç”¨æ•ˆç‡ã€‚ å®é™…ä¸Šï¼ŒEventLoopä¸­çš„çº¿ç¨‹é™¤äº†æ‰§è¡ŒIOæ“ä½œï¼Œè¿˜ä¼šæ‰§è¡ŒChannelPipelineä¸Šçš„handlerçš„è´£ä»»é“¾æ–¹æ³•ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…é¢‘æ¢åˆ‡æ¢çº¿ç¨‹å¸¦æ¥çš„æŸè€—ï¼Œæ‰€ä»¥handlerä¸­ä¸€èˆ¬ä¸å¯ä»¥æ”¾ç½®è€—æ—¶çš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰è€—æ—¶çš„ä»»åŠ¡ï¼Œå¯ä»¥å°†ä»»åŠ¡æ”¾å…¥è‡ªå®šä¹‰çš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚ äº”.ByteBufJavaçš„NIOç»™æˆ‘ä»¬æä¾›äº†ç¼“å†²åŒºçš„å®ç°ByteBufferï¼Œä½†æ˜¯å®ƒçš„æ˜“ç”¨æ€§è¾ƒå·®ï¼ˆè¯»å†™æ¨¡å¼éœ€è¦åˆ‡æ¢ç­‰é—®é¢˜ï¼‰ï¼Œæ‰€ä»¥ï¼ŒNettyè‡ªå·±é‡æ–°å®ç°äº†ç¼“å†²åŒºByteBufï¼ŒByteBufçš„APIæ›´æ˜“ç”¨ã€å¹¶ä¸”æä¾›äº†å†…å­˜æ± çš„åŠŸèƒ½ï¼Œå¯¹äºæ± åŒ–çš„ByteBufå’Œç›´æ¥å†…å­˜çš„ByteBufï¼ŒNettyè¿˜æä¾›äº†å¯¹å†…å­˜æ³„æ¼çš„ç›‘æ§ï¼ˆå¹¶ä¸”è®¾ç½®äº†å„ç§æ€§èƒ½çº§åˆ«ï¼‰ï¼Œå¦å¤–ByteBufè¿˜æä¾›äº†å¯¹ByteBufferçš„å…¼å®¹ã€‚","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://carrotwang.github.io/tags/Netty/"}]},{"title":"Javaæ—¥å¿—æ¡†æ¶(Slf4j vs Commons Logging)","slug":"Javaæ—¥å¿—æ¡†æ¶-Slf4j-vs-Commons-Logging","date":"2019-11-06T03:20:18.000Z","updated":"2019-11-06T03:22:54.037Z","comments":true,"path":"2019/11/06/Javaæ—¥å¿—æ¡†æ¶-Slf4j-vs-Commons-Logging/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Java%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-Slf4j-vs-Commons-Logging/","excerpt":"","text":"æœ€è¿‘ï¼Œæ–°å¼€å‘çš„ä¸€ä¸ªé¡¹ç›®é‡åˆ°äº†ä¸€ä¸ªlog4jçš„é…ç½®é—®é¢˜ï¼Œä¹‹å‰ä¸€ç›´æ²¡æ€ä¹ˆå…³æ³¨è¿‡æ—¥å¿—æ¡†æ¶ï¼Œå€ŸåŠ©è¿™ä¸ªæœºä¼šï¼Œå¥½å¥½äº†è§£ä¸‹Javaçš„æ—¥å¿—æ¡†æ¶ï¼Œä¾¿äºä»¥åæ›´å¥½çš„ä½¿ç”¨ã€‚ æœ¬æ–‡é‡ç‚¹ä»‹ç»äº†ï¼šJavaæ—¥å¿—æ¡†æ¶ç”Ÿæ€ã€Javaæ—¥å¿—æ¡†æ¶çš„ç»“æ„ç»„æˆã€Slf4jæ›¿ä»£Commons Loggingã€‚ Javaå¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶å¦‚ä¸‹ï¼š Commons Loggingï¼šApacheåŸºé‡‘ä¼šæ‰€å±çš„é¡¹ç›®ï¼Œæ˜¯ä¸€å¥—Javaæ—¥å¿—æ¥å£ï¼› Slf4jï¼šæ˜¯ä¸€å¥—ç®€æ˜“Javaæ—¥å¿—é—¨é¢ï¼Œæœ¬èº«å¹¶æ— æ—¥å¿—çš„å®ç°ã€‚ï¼ˆSimple Logging Facade for Javaï¼Œç¼©å†™Slf4jï¼‰ï¼› log4jï¼šApache Log4jæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æ—¥å¿—è®°å½•å·¥å…·ï¼› log4j 2ï¼šApache Log4j 2æ˜¯apacheå¼€å‘çš„ä¸€æ¬¾Log4jçš„å‡çº§äº§å“ï¼Œä¸å…¼å®¹log4j 1ï¼› Logbackï¼šä¸€å¥—æ—¥å¿—ç»„ä»¶çš„å®ç°(slf4jé˜µè¥)ï¼› Julï¼šJava Util Loggingï¼Œè‡ªJava1.4ä»¥æ¥çš„å®˜æ–¹æ—¥å¿—å®ç°ã€‚ ç°ä»Šï¼ŒJavaæ—¥å¿—é¢†åŸŸè¢«åˆ’åˆ†ä¸ºä¸¤å¤§é˜µè¥ï¼šCommons Loggingé˜µè¥å’ŒSLF4Jé˜µè¥ã€‚ å„æ—¥å¿—æ¡†æ¶ä¹‹é—´çš„å…³ç³»ï¼š Commons Loggingå’ŒSlf4jæ˜¯ä¸¤ä¸ªæ—¥å¿—é—¨é¢æ¡†æ¶ï¼Œç³»ç»Ÿä¸å’Œæ—¥å¿—å®ç°è€¦åˆï¼Œæ—¥å¿—é—¨é¢ä½œä¸ºæ¥å¾…å‘˜ï¼Œæ–¹ä¾¿æ—¥å¿—å®ç°çš„æ›¿æ¢ï¼ˆå¦‚ï¼šlog4j2æ›¿æ¢log4j1ï¼‰ï¼› Commons Loggingå’Œlog4j1ã€2é…åˆä½¿ç”¨ï¼ŒSlf4jå’ŒLogbackç»„åˆä½¿ç”¨ï¼› æ–°é¡¹ç›®å»ºè®®ä½¿ç”¨Slf4jä¸Logbackç»„åˆï¼› ##æ¡¥æ¥åŸç†åˆ†ææ¡¥æ¥å™¨åŸæœ¬è¯­å¢ƒæ˜¯ä½¿ç”¨åœ¨ç½‘ç»œä¸­æ•°æ®åŒ…çš„è½¬å‘ï¼Œåœ¨æ—¥å¿—æ¡†æ¶é‡Œï¼Œä¸»è¦æ˜¯æ—¥å¿—é—¨é¢å¯»æ‰¾æ—¥å¿—å®ç°ç±»çš„ç±»ã€‚ Slf4jåœ¨è·å–æ—¥å¿—æ¡†æ¶å®ç°æ—¶æ‰«æclass pathï¼Œå¯»æ‰¾org.slf4j.impl.StaticLoggerBinderï¼ˆæœ‰å¤šä¸ªï¼Œä¼šæ‰“å°è­¦å‘Šæ—¥å¿—ï¼Œå¹¶é€‰æ‹©é‡åˆ°çš„ç¬¬ä¸€ä¸ªï¼‰ï¼Œæ¡¥æ¥å™¨å°±æ˜¯æä¾›æ¡¥æ¥æ¥å®ç°ç±»å’Œæ¥å£ç±»ä¹‹é—´çš„é€‚é…ã€‚ å¯¹äºCommons Loggingï¼Œå…¶å¯»æ‰¾Loggerå®ç°çš„æ­¥éª¤å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œå¯»æ‰¾org.apache.commons.logging.LogFactory å±æ€§é…ç½® å¦åˆ™ï¼Œåˆ©ç”¨JDK1.3 å¼€å§‹æä¾›çš„service å‘ç°æœºåˆ¶ï¼Œä¼šæ‰«æclasspah ä¸‹çš„META-INF/services/org.apache.commons.logging.LogFactory æ–‡ä»¶ï¼Œè‹¥æ‰¾åˆ°åˆ™è£…è½½é‡Œé¢çš„é…ç½®ï¼Œä½¿ç”¨é‡Œé¢çš„é…ç½®ã€‚ å¦åˆ™ï¼Œä»Classpath é‡Œå¯»æ‰¾commons-logging.properties ï¼Œæ‰¾åˆ°åˆ™æ ¹æ®é‡Œé¢çš„é…ç½®åŠ è½½ã€‚ å¦åˆ™ï¼Œä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼šå¦‚æœèƒ½æ‰¾åˆ°Log4j åˆ™é»˜è®¤ä½¿ç”¨log4j å®ç°ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨JDK14Logger å®ç°ï¼Œå†æ²¡æœ‰åˆ™ä½¿ç”¨commons-logging å†…éƒ¨æä¾›çš„SimpleLog å®ç°ã€‚ Slf4jå’ŒCommons Loggingè·å–Loggerçš„åŒºåˆ«ï¼šSlf4jæ‰«æclasspathè·å–StaticLoggerBinderï¼Œé€šè¿‡StaticLoggerBinderçš„é™æ€ç»‘å®šé€»è¾‘è·å–Loggerã€‚Commons Loggingæ˜¯é‡‡ç”¨ClassLoaderåŠ¨æ€çš„è·å–Loggerï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ä¼šäº§ç”ŸClassLoaderçš„é—®é¢˜ï¼ˆå¦‚OSGIï¼Œä¸»è¦åŸå› åœ¨æ–‡æœ«Ceki GÃ¼lcÃ¼çš„ä¸€ç‰‡å‚è€ƒæ–‡çŒ®æœ‰æåŠï¼‰ Slf4j&amp;Logbackçš„ä¼˜åŠ¿ Slf4jçš„é™æ€ç»‘å®šå®ç°æœºåˆ¶å†³å®šäº†å…¶æ›´åŠ é€šç”¨ï¼› Logbackæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ï¼›Logbackå£°ç§°ï¼šæŸäº›å…³é”®æ“ä½œï¼Œæ¯”å¦‚åˆ¤å®šæ˜¯å¦è®°å½•ä¸€æ¡æ—¥å¿—è¯­å¥çš„æ“ä½œï¼Œå…¶æ€§èƒ½å¾—åˆ°äº†æ˜¾è‘—çš„æé«˜ã€‚è¿™ä¸ªæ“ä½œåœ¨Logbackä¸­éœ€è¦3çº³ç§’ï¼Œè€Œåœ¨Log4Jä¸­åˆ™éœ€è¦30çº³ç§’ã€‚LogBackåˆ›å»ºè®°å½•å™¨ï¼ˆloggerï¼‰çš„é€Ÿåº¦ä¹Ÿæ›´å¿«ï¼š13æ¯«ç§’ï¼Œè€Œåœ¨Log4Jä¸­éœ€è¦23æ¯«ç§’ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè·å–å·²å­˜åœ¨çš„è®°å½•å™¨åªéœ€94çº³ç§’ï¼Œè€ŒLog4Jéœ€è¦2234çº³ç§’ï¼Œæ—¶é—´å‡å°‘åˆ°äº†1/23ã€‚è·ŸJULç›¸æ¯”çš„æ€§èƒ½æé«˜ä¹Ÿæ˜¯æ˜¾è‘—çš„ã€‚ è‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå½“é…ç½®æ–‡ä»¶ä¿®æ”¹äº†ï¼ŒLogback-classicèƒ½è‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶â€¦ ##LogBackç»“æ„Javaæ—¥å¿—æ¡†æ¶ç”±3éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯Loggerï¼ŒFormatterï¼ŒAppenderã€‚Loggerï¼šç”¨æ¥æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼›Formatterï¼šç”¨æ¥æ ¼å¼åŒ–æ—¥å¿—å†…å®¹ï¼›Appenderï¼šå°†æ—¥å¿—å†…å®¹è¾“å‡ºåˆ°Consoleï¼Œsocketï¼Œæ–‡ä»¶ï¼Œæ•°æ®åº“ï¼Œé‚®ä»¶ç­‰ã€‚åœ¨Logbackä¸­ï¼Œåˆ™åˆ†åˆ«å¯¹åº”äºLoggerã€Layoutã€Appenderã€‚ Logger Loggeræœ‰ä¸‰ç‚¹éœ€è¦é‡ç‚¹å…³æ³¨ï¼šåå­—å±æ€§ã€Levelå±æ€§ï¼Œå¦‚ä½•è·å–ã€‚ ï¼ˆ1ï¼‰æ¯ä¸ªLoggeréƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œå¹¶ä¸”æœ‰çˆ¶å­ã€å­å­™å±‚æ¬¡å…³ç³»ï¼› å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„Loggerå®ä¾‹ï¼Œå®ƒçš„åå­—ä¸ºâ€œorg.slf4j.Logger.ROOT_LOGGER_NAMEâ€ï¼Œå³â€œROOTâ€ ï¼ˆ2ï¼‰Loggerå®ä¾‹åº”è¯¥è®¾ç½®Levelå±æ€§ï¼Œå¦‚æœæŸä¸ªLoggerå®ä¾‹çš„Levelå±æ€§æœªè®¾ç½®ï¼Œé‚£ä¹ˆæ²¿ç€Loggerå®ä¾‹çš„å±‚æ¬¡å…³ç³»å‘ä¸Šå›æº¯ç›´åˆ°æœ€é¡¶å±‚çš„â€ROOTâ€Loggerå®ä¾‹ä¸ºæ­¢ã€‚ ï¼ˆ3ï¼‰åœ¨Logbackè¿è¡Œçš„æ—¶å€™ï¼ŒLoggerContextç±»å®ä¾‹ä¼šç»´æŠ¤ä¸€ä¸ªç±»å‹ä¸ºMap&lt;String, Logger&gt;çš„mapå¯¹è±¡loggerCacheï¼Œå®ƒçš„keyä¸ºLoggerå®ä¾‹çš„åå­—ï¼Œå®ƒçš„valueä¸ºå¯¹åº”çš„Loggerå®ä¾‹ã€‚å½“æˆ‘ä»¬æ‰§è¡Œâ€LoggerFactory.getLogger(â€˜xxxâ€™)â€è¯­å¥ï¼Œæ¥æ£€ç´¢åå­—ä¸ºâ€xxxâ€çš„Loggerå®ä¾‹æ—¶ï¼ŒLoggerContextç±»å®ä¾‹ä¼šå…ˆå»æŸ¥çœ‹loggerCacheå¯¹è±¡ï¼Œçœ‹æ˜¯å¦å·²ç»å­˜åœ¨åå­—ä¸ºâ€xxxâ€çš„Loggerå®ä¾‹ï¼Œå¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼›å¦åˆ™ï¼Œå…ˆåˆ›å»ºå¥½Loggerå®ä¾‹ï¼ˆæ³¨æ„è¿™é‡Œåˆ›å»ºLoggerå®ä¾‹çš„æ—¶å€™ï¼Œä¼šæŠŠloggerCacheä¸­ä¸å­˜åœ¨çš„ç¥–å…ˆå’Œçˆ¶äº²Loggerå®ä¾‹éƒ½åˆ›å»ºå¥½ï¼‰å¹¶æ”¾å…¥loggerCacheä¸­ï¼Œæœ€åè¿”å›åˆšåˆ›å»ºå¥½çš„Loggerå®ä¾‹ã€‚å³åœ¨Logbackè¿è¡Œçš„æ—¶å€™ï¼Œç›¸åŒåå­—çš„Loggerå®ä¾‹åªä¿å­˜ä¸€ä»½ã€‚ Layout ç»‘å®šåœ¨Appenderä¸Šï¼Œç”¨æ¥æ ¼å¼åŒ–Appenderçš„è¾“å‡º Appender Appenderä»£è¡¨æ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼Œå¯ä»¥æ˜¯Console, File, Sockets, DataBaseç­‰ç­‰ã€‚ä¸€ä¸ªLoggerå®ä¾‹ä¸Šå¯ä»¥ç»‘å®š0åˆ°å¤šä¸ªAppenderå®ä¾‹ï¼Œå½“åœ¨è¯¥Loggerå®ä¾‹ä¸Šäº§ç”Ÿçš„æ—¥å¿—è®°å½•è¯·æ±‚æ˜¯æœ‰æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—è®°å½•è¯·æ±‚ä¼šè¢«å‘é€åˆ°æ‰€æœ‰ç»‘å®šåœ¨è¯¥Loggerå®ä¾‹ä¸Šçš„Appenderå®ä¾‹ã€‚ä¸€ä¸ªLoggerå®ä¾‹ä¸Šç»‘å®šçš„Appenderå®ä¾‹ä¸ä»…æ¥è‡ªè‡ªèº«çš„ç»‘å®šï¼Œä¹Ÿæ¥è‡ªç¥–å…ˆå’Œçˆ¶äº²Loggerå®ä¾‹çš„Appenderç»‘å®šï¼Œå³å¯ä»¥ç»§æ‰¿ç¥–å…ˆå’Œçˆ¶äº²Loggerå®ä¾‹ç»‘å®šçš„Appenderå®ä¾‹ã€‚ Slf4jæ›¿ä»£Commons LoggingJavaç”Ÿæ€æœ‰è®¸å¤šæ—¥å¿—å·¥å…·ï¼Œä¸åŒçš„ç»„ä»¶å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œä¸ºäº†ä¸å¯¹æ—¥å¿—æ¡†æ¶äº§ç”Ÿä¾èµ–ï¼ŒApacheå¼•å…¥äº†Commons Loggingé—¨é¢æ¡†æ¶ï¼Œä¸è¿‡å½“ç¨‹åºè§„æ¨¡è¶Šæ¥è¶Šåºå¤§æ—¶ï¼ŒJCLçš„åŠ¨æ€ç»‘å®šå¹¶ä¸æ˜¯æ€»èƒ½æˆåŠŸã€‚Slf4jçš„é™æ€ç»‘å®šåŠŸèƒ½è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œç„¶è€Œï¼Œä¾èµ–çš„ç»„ä»¶ä¸­å¯èƒ½ä¼šæœ‰ä½¿ç”¨äº†Commons Loggingçš„ç»„ä»¶ï¼ŒSlf4jæä¾›äº†jcl-over-slf4j.jar ï¼Œå¯ä»¥å€ŸåŠ©jcl-over-slf4j.jar è®²Commons Loggingè¾“å‡ºçš„æ—¥å¿—å¼•å…¥åˆ°Slf4jä¸­ã€‚Component(æœåŠ¡) | | log to Apache Commons Logging(JCL) Vjcl-over-slf4j.jar â€” (redirect) â€”&gt; SLF4j â€”&gt; slf4j-log4j12-version.jar â€”&gt; log4j.jar â€”&gt; è¾“å‡ºæ—¥å¿—ï¼ˆå¦å¤–ä¹Ÿå¯ä»¥åˆ é™¤æ‰€æœ‰Commons Loggingçš„ä¾èµ–ï¼Œä¸è¿‡è¿™å¤ªç¹çäº†ï¼Œä¹Ÿå®¹æ˜“å‡ºé—®é¢˜ï¼‰ã€‚ å‚è€ƒæ–‡çŒ®ï¼šhttps://www.cnblogs.com/chenhongliang/p/5312517.htmlï¼ˆå„æ—¥å¿—æ¡†æ¶ä»‹ç»ï¼‰https://www.cnblogs.com/crazyrunning/p/6145890.htmlï¼ˆæ—¥å¿—é—¨é¢çš„ä½œç”¨ï¼‰http://www.runoob.com/design-pattern/facade-pattern.htmlï¼ˆé—¨é¢æ¨¡å¼ï¼‰https://blog.csdn.net/jpf254/article/details/80757041ï¼ˆSlf4jæ¡¥æ¥åŸç†ï¼‰http://singleant.iteye.com/blog/934593ï¼ˆcommons-logging Loggerå®ç°åŠ è½½æ­¥éª¤ï¼‰https://blog.csdn.net/dslztx/article/details/47450741ï¼ˆLogbackè¯¦è§£ï¼‰https://articles.qos.ch/classloader.htmlï¼ˆCeki GÃ¼lcÃ¼æ§è¯‰äº†Commons Loggingçš„å¼Šç«¯ğŸ˜‚ï¼‰https://blog.csdn.net/zbajie001/article/details/79596109ï¼ˆLogbackçš„ä¼˜ç‚¹ï¼‰https://blog.csdn.net/javaloveiphone/article/details/52486257ï¼ˆSlf4jæ›¿ä»£Commons Loggingï¼‰","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Web","slug":"Web","permalink":"https://carrotwang.github.io/tags/Web/"}]},{"title":"Maven Profileé›†æˆSpring Profile","slug":"Maven-Profileé›†æˆSpring-Profile","date":"2019-11-06T03:12:02.000Z","updated":"2019-11-06T03:15:34.076Z","comments":true,"path":"2019/11/06/Maven-Profileé›†æˆSpring-Profile/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Maven-Profile%E9%9B%86%E6%88%90Spring-Profile/","excerpt":"","text":"æˆ‘ä»¬åœ¨ä¸€ä¸ªäº§å“çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œä¼šæ¥è§¦å¤šä¸ªç¯èŠ‚ï¼šå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼Œè¿™äº›ç¯å¢ƒä¼šå¯¹åº”ä¸åŒçš„DataSourceã€Redisé›†ç¾¤ã€Zookeeperç­‰é…ç½®ã€‚ Mavençš„Profileæœºåˆ¶Profileèƒ½è®©ä½ ä¸ºä¸€ä¸ªç‰¹æ®Šçš„ç¯å¢ƒè‡ªå®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„æ„å»ºï¼›profileä½¿å¾—ä¸åŒç¯å¢ƒé—´æ„å»ºçš„å¯ç§»æ¤æ€§æˆä¸ºå¯èƒ½ã€‚Mavenä¸­çš„profileæ˜¯ä¸€ç»„å¯é€‰çš„é…ç½®ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®æˆ–è€…è¦†ç›–é…ç½®é»˜è®¤å€¼ã€‚æœ‰äº†profileï¼Œä½ å°±å¯ä»¥ä¸ºä¸åŒçš„ç¯å¢ƒå®šåˆ¶æ„å»ºã€‚ 123456789101112131415161718192021&lt;project&gt; &lt;profiles&gt; &lt;profile&gt; &lt;build&gt; &lt;defaultGoal&gt;...&lt;/defaultGoal&gt; &lt;finalName&gt;...&lt;/finalName&gt; &lt;resources&gt;...&lt;/resources&gt; &lt;testResources&gt;...&lt;/testResources&gt; &lt;plugins&gt;...&lt;/plugins&gt; &lt;/build&gt; &lt;reporting&gt;...&lt;/reporting&gt; &lt;modules&gt;...&lt;/modules&gt; &lt;dependencies&gt;...&lt;/dependencies&gt; &lt;dependencyManagement&gt;...&lt;/dependencyManagement&gt; &lt;distributionManagement&gt;...&lt;/distributionManagement&gt; &lt;repositories&gt;...&lt;/repositories&gt; &lt;pluginRepositories&gt;...&lt;/pluginRepositories&gt; &lt;properties&gt;...&lt;/properties&gt; &lt;/profile&gt; &lt;/profiles&gt;&lt;/project&gt; ä¸€ä¸ªProfileå¯ä»¥è¦†ç›–é¡¹ç›®æ„ä»¶çš„æœ€ç»ˆåç§°ï¼Œé¡¹ç›®ä¾èµ–ï¼Œæ’ä»¶é…ç½®ä»¥å½±å“æ„å»ºè¡Œä¸ºï¼ŒProfileè¿˜å¯ä»¥è¦†ç›–åˆ†å‘é…ç½®ã€‚mavenæä¾›äº†ä¸€ç§é’ˆå¯¹ä¸åŒç¯å¢ƒå‚æ•°â€œæ¿€æ´»â€ä¸€ä¸ªprofileçš„æ–¹å¼ï¼Œè¿™å°±å«åšprofileæ¿€æ´»ã€‚ ä½¿ç”¨-På‚æ•°æ˜¾ç¤ºçš„æ¿€æ´»ä¸€ä¸ªprofile æˆ‘ä»¬åœ¨è¿›è¡ŒMavenæ“ä½œæ—¶å°±å¯ä»¥ä½¿ç”¨-På‚æ•°æ˜¾ç¤ºçš„æŒ‡å®šå½“å‰æ¿€æ´»çš„æ˜¯å“ªä¸€ä¸ªprofileäº†ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ä½¿ç”¨idä¸ºprofileTest1çš„profileï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·åšï¼š 1mvn package â€“P profileTest1 Spring Bootçš„æ”¯æŒSpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶application.propertiesæˆ–application.ymlï¼Œé…ç½®æ–‡ä»¶è·¯å¾„ï¼šsrc/main/resourceç›®å½•ä¸‹æˆ–ç±»è·¯å¾„ä¸‹çš„/configä¸‹ã€‚ Spring bootæ”¯æŒé…ç½®å¤šä¸ªç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œå…¶é…ç½®æ–‡ä»¶åå­—æ ¼å¼application-{profile}.yml Springå¯ä»¥åœ¨application.propertiesæŒ‡å®šæ¿€æ´»çš„profileï¼Œé…ç½®å¦‚ä¸‹ï¼š 12#propertiesæ ¼å¼spring.profiles.active=dev ä¹Ÿå¯ä»¥åœ¨å¯åŠ¨åº”ç”¨çš„æ—¶å€™æ·»åŠ å¯åŠ¨å‚æ•°--spring.profiles.active=devã€‚ï¼ˆâš ï¸Spring Bootçš„Profileæœºåˆ¶å’ŒMavençš„å…¶å®æ˜¯æ²¡å…³ç³»çš„ï¼Œæ–‡æœ«ç»™å‡ºäº†ä¸€ç¯‡åšå®¢ï¼Œè®²è§£äº†å¦‚ä½•å°†Mavençš„Profileæœºåˆ¶ä¸Spring Bootçš„active profileæœºåˆ¶åŒæ­¥ï¼ŒæœªéªŒè¯ï¼‰ å¾®æœåŠ¡ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶å‰é¢ä»‹ç»çš„ä¸¤ç§æ–¹å¼ï¼Œé…ç½®æ–‡ä»¶éƒ½æ˜¾å¼çš„æš´éœ²åœ¨é¡¹ç›®ä¸­ï¼Œè¿™å¯¹äºå®é™…è¿è¥çš„é¡¹ç›®ï¼Œæ˜¯æœ‰æ¯”è¾ƒå¤šçš„é—®é¢˜çš„ï¼š å¯¹äºåœ¨çº¿è¿è¥çš„é¡¹ç›®æœ‰å®‰å…¨éšæ‚£ï¼Œæ•°æ®åº“ç­‰ä¿¡æ¯éƒ½ä¼šæš´éœ²å‡ºæ¥ï¼Œç»™äº§å“çš„å®‰å…¨å¸¦æ¥å¾ˆå¤§çš„éšæ‚£ å¯¹äºå¾®æœåŠ¡åœºæ™¯ï¼Œä¸åˆ©äºç»´æŠ¤ ï¼ˆ1ï¼‰é…ç½®åˆ†æ•£åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ï¼Œä¸åˆ©äºç»Ÿä¸€ç®¡ç† ï¼ˆ2ï¼‰é…ç½®å’Œä»£ç å¤„äºåŒä¸€ä¸ªç‰ˆæœ¬ä½“ç³»ä¸‹ï¼Œä¸åˆ©äºç‰ˆæœ¬ç®¡ç† ï¼ˆ3ï¼‰å¤šä¸ªç³»ç»Ÿå…±åŒä½¿ç”¨çš„é…ç½®æ›´æ”¹æ—¶ï¼Œéœ€è¦ä¸€å¤„å¤„å»ä¿®æ”¹ï¼Œéå¸¸éº»çƒ¦ï¼Œå®¹æ˜“å‡ºé”™ ï¼ˆ4ï¼‰å¯¹äºåŠ¨æ€é…ç½®çš„æ–‡ä»¶ï¼Œä¹Ÿä¸åˆ©äºOPSç»´æŠ¤å› æ­¤ï¼Œä¸šç•Œæ™®éé‡‡ç”¨äº†Config Serverçš„æ–¹å¼ï¼ŒSpring Cloudæä¾›äº†Spring Cloud Configçš„ç»„ä»¶ï¼Œå¸®åŠ©æˆ‘ä»¬ç®¡ç†å¾®æœåŠ¡çš„é…ç½®ã€‚ Consuå¯ä»¥lä½œä¸ºé…ç½®æœåŠ¡ï¼Œå¹¶é‡‡ç”¨gitå­˜å‚¨ã€‚å¦å¤–Spring Cloud Configä¹Ÿæ”¯æŒgitç‰ˆæœ¬ç®¡ç†ï¼ŒConsulåœ¨å¯ç”¨æ€§çš„æ”¯æŒä¸Šæ›´èƒœä¸€ç­¹ï¼›å¯¹äºåŠ¨æ€é…ç½®ï¼ŒConsulä¹Ÿä¼šæ–¹ä¾¿ä¸€äº›ä¸éœ€è¦å€ŸåŠ©Spring Cloud Busè¿™æ ·çš„ä¸­é—´ä»¶ã€‚ï¼ˆSpring Cloud Buså°†Springçš„äº‹ä»¶å¤„ç†æœºåˆ¶å’Œæ¶ˆæ¯ä¸­é—´ä»¶æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ•´åˆèµ·æ¥ï¼Œå¯ä»¥è½»æ¾çš„å°†åˆ†å¸ƒå¼åº”ç”¨ä¸­è¿æ¥æœ‰æ¶ˆæ¯ä¸­é—´ä»¶çš„å¤šä¸ªæœåŠ¡èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå®ç°æ¶ˆæ¯äº’é€šã€‚ï¼‰ å‚è€ƒæ–‡çŒ®ï¼šhttps://www.cnblogs.com/wxgblogs/p/6696229.htmlï¼ˆMaven Profilesè¯¦è§£ï¼‰https://www.jianshu.com/p/8c48f4fd69daï¼ˆProfileä¹‹Mavenã€Spring Bootã€Spring Cloud Configï¼‰https://www.cnblogs.com/softidea/p/6375806.htmlï¼ˆä»Mavençš„Profileç¯å¢ƒè·å–Spring Bootçš„active profileï¼‰https://yq.aliyun.com/articles/468274ï¼ˆé˜¿é‡Œå·´å·´å¾®æœåŠ¡é…ç½®ä¸­å¿ƒä»‹ç»ï¼‰https://www.jianshu.com/p/b1463c1df5a2ï¼ˆConsulä½œä¸ºå¾®æœåŠ¡é…ç½®ä¸­å¿ƒï¼‰","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Web","slug":"Web","permalink":"https://carrotwang.github.io/tags/Web/"},{"name":"Spring","slug":"Spring","permalink":"https://carrotwang.github.io/tags/Spring/"},{"name":"Maven","slug":"Maven","permalink":"https://carrotwang.github.io/tags/Maven/"}]},{"title":"5åˆ†é’Ÿflinkæç®€å…¥é—¨","slug":"5åˆ†é’Ÿflinkæç®€å…¥é—¨","date":"2019-11-06T01:59:03.000Z","updated":"2019-11-06T02:06:20.039Z","comments":true,"path":"2019/11/06/5åˆ†é’Ÿflinkæç®€å…¥é—¨/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/5%E5%88%86%E9%92%9Fflink%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/","excerpt":"","text":"","categories":[{"name":"flink","slug":"flink","permalink":"https://carrotwang.github.io/categories/flink/"}],"tags":[{"name":"flink","slug":"flink","permalink":"https://carrotwang.github.io/tags/flink/"},{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"https://carrotwang.github.io/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"},{"name":"å®æ—¶è®¡ç®—","slug":"å®æ—¶è®¡ç®—","permalink":"https://carrotwang.github.io/tags/%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97/"}]},{"title":"Nettyæºç é˜…è¯»ï¼ˆåºï¼‰","slug":"Nettyæºç é˜…è¯»ï¼ˆåºï¼‰","date":"2019-11-06T01:33:07.000Z","updated":"2019-11-06T03:33:54.427Z","comments":true,"path":"2019/11/06/Nettyæºç é˜…è¯»ï¼ˆåºï¼‰/","link":"","permalink":"https://carrotwang.github.io/2019/11/06/Netty%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E5%BA%8F%EF%BC%89/","excerpt":"","text":"å‚åŠ çš„é˜¿é‡Œä¸­é—´ä»¶æ€§èƒ½æŒ‘æˆ˜èµ›ç”¨åˆ°äº†Nettyï¼Œå°±å†³å®šåˆ©ç”¨è¿™ä¸ªæœºä¼šï¼Œè¯»ä¸€è¯»Nettyçš„æºç ã€‚é¦–å…ˆï¼Œæˆ‘è®¤ä¸ºé˜…è¯»æºç å¤§è‡´æœ‰2ä¸ªä¸»è¦ç›®çš„ï¼Œ1.äº†è§£Nettyçš„å†…éƒ¨æœºåˆ¶ï¼Œæ›´å¥½çš„ä½¿ç”¨Nettyï¼›2.å­¦ä¹ Nettyçš„å®ç°ï¼Œæ¯”å¦‚æ± åŒ–çš„ByteBufã€ä»¥åŠEventLoopçš„è´£ä»»é“¾æ¨¡å¼ï¼Œæˆ‘è®¤ä¸ºéƒ½æœ‰å¾ˆå¤šå€¼å¾—å€Ÿé‰´ï¼Œå¯ä»¥ç”¨åœ¨å·¥ä½œä¸­çš„æŠ€å·§å’Œæ€æƒ³ï¼›3.å¯ä»¥çœ‹ä¸€çœ‹æ¯”è¾ƒå¤æ‚çš„æ¡†æ¶ä»£ç çš„ç»„ç»‡ç»“æ„ã€ä»£ç é£æ ¼ï¼Œå¹¶åšä¸€äº›æ€è€ƒğŸ¤”ã€‚ é˜…è¯»æºç ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ªå¤§å±€è§‚ï¼Œå°±æ˜¯Nettyè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Œä¸»è¦æœ‰å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ å¦å¤–ï¼Œæˆ‘è®¤ä¸ºå¸¦ç€é—®é¢˜å»é˜…è¯»ï¼Œæ‰èƒ½å¤Ÿå¸¦æ¥æ›´å¤šçš„æ”¶è·ã€‚æ‰€ä»¥ï¼Œæˆ‘æƒ³åœ¨è¿™æ¬¡é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿå›ç­”ä»¥ä¸‹è¿™äº›é—®é¢˜ï¼š Nettyæœ‰å“ªäº›ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Ÿ Channelã€ChannelPipelineã€ChannelHandlerã€Eventloopã€ChannelFutureã€Bootstrapç­‰ã€‚ Nettyå¦‚ä½•å¯¹Java NIOè¿›è¡Œçš„å°è£…ï¼Ÿ Nettyçš„Channelå€ŸåŠ©é—¨é¢æ¨¡å¼ï¼Œ(1)å°è£…äº†å’Œç½‘ç»œç›¸å…³çš„æ“ä½œï¼Œæä¾›äº†ç»Ÿä¸€çš„è§†å›¾ï¼ˆå¯¹äºServerSocketChannelå’ŒSocketChannelï¼‰ï¼Œå…¶åº•å±‚IOæ“ä½œæ˜¯ç”±UnSafeæ¥å£å®ç°çš„ï¼Œè€ŒChannelçš„éª¨éª¼ç±»AbstractChannelåªæ˜¯è°ƒç”¨äº†ChannelPipelineçš„ç›¸åº”æ–¹æ³•è®©äº‹ä»¶åœ¨è´£ä»»é“¾ä¸Šä¼ é€’ä¾æ¬¡å¤„ç†ï¼ŒChannelPipelineä¸Šçš„HeadContextè°ƒç”¨UnSafeçš„æ–¹æ³•æ‰§è¡Œå®é™…çš„IOæ“ä½œï¼›ï¼ˆ2ï¼‰å°è£…äº†å¯¹Channelæ¥å£çš„é…ç½®å‚æ•°æ“ä½œï¼ˆ3ï¼‰ç»´æŠ¤äº†Channelçš„çŠ¶æ€ï¼ˆreadableï¼Œwritableï¼Œopenï¼Œactiveç­‰ï¼‰ï¼ˆ4ï¼‰Channelæ¥å£è¿˜èšåˆäº†ChannelPipelineæ¥å£ï¼Œè€ŒChannelPipelineç”¨äºå¤„ç†æ‰€æœ‰çš„IOäº‹ä»¶ã€‚ Nettyå¦‚ä½•åˆ©ç”¨æ— é”åŒ–åšåˆ°çš„é«˜æ€§èƒ½ï¼Ÿ nettyå¦‚ä½•ç›‘æ§å†…å­˜æ³„æ¼ï¼Ÿ nettyå¦‚ä½•å®ç°çš„bufferæ± ï¼Ÿ nettyåœ¨ä»£ç è®¾è®¡æ–¹é¢å€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼Ÿ æœ€åï¼Œç»™å‡ºä¸€äº›æˆ‘åˆæ¬¡é˜…è¯»è¾ƒå¤§é¡¹ç›®æºç çš„ä¸€äº›æ€è€ƒï¼š å…ˆäº†è§£æ•´ä½“æ¡†æ¶ï¼Œå†å»æ‰¾æ„Ÿå…´è¶£çš„éƒ¨åˆ†å»è¯»ï¼› 2.å¸¦ç€é—®é¢˜å»è¯»ï¼› 3.é˜…è¯»Nettyæºç æ˜¯ä¸€ä¸ªå­¦ä¹ å¹¶å‘ç¼–ç¨‹ï¼Œç½‘ç»œç¼–ç¨‹æå¥½çš„æ–¹å¼ã€‚ Nettyä¸­çš„è®¾è®¡æ¨¡å¼ï¼š è§‚å¯Ÿè€…æ¨¡å¼ï¼šFutureï¼ŒListener è´£ä»»é“¾æ¨¡å¼ï¼šChannelPipeline é—¨é¢æ¨¡å¼ï¼šChannelç»Ÿä¸€å°è£…äº†ç½‘ç»œæ“ä½œã€‚ é€‚é…å™¨æ¨¡å¼ï¼šChannelInboundHandlerAdapter è£…é¥°å™¨æ¨¡å¼ï¼šSimpleLeakAwareByteBufio.netty.util.concurrent.SingleThreadEventExecutor#wakeup ä»€ä¹ˆä½œç”¨ï¼Ÿ Nettyä¸­çš„æ­»é”é—®é¢˜ï¼Ÿ","categories":[{"name":"Java Web","slug":"Java-Web","permalink":"https://carrotwang.github.io/categories/Java-Web/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://carrotwang.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://carrotwang.github.io/tags/Netty/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-11-05T08:42:15.455Z","updated":"2019-11-06T01:53:42.564Z","comments":true,"path":"2019/11/05/hello-world/","link":"","permalink":"https://carrotwang.github.io/2019/11/05/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://carrotwang.github.io/categories/%E5%89%8D%E7%AB%AF/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://carrotwang.github.io/tags/hexo/"}]}]}